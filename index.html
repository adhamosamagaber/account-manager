<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELDORADO V94 (STOCK FIX)</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --eldorado-gold: #ffbd00; --roblox-red: #ff4757; --success: #2ecc71;
            --purple: #8e44ad; --cyan: #00cec9; --grey: #95a5a6;
            --glass-bg: rgba(30, 35, 45, 0.6); --glass-border: 1px solid rgba(255, 255, 255, 0.08);
            --glass-card: rgba(255, 255, 255, 0.03); --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }
        body { font-family: 'Cairo', sans-serif; margin: 0; background: radial-gradient(circle at top right, #1a2236, #0f1219 60%, #050505); color: #eee; overflow-x: hidden; min-height: 100vh; }
        #particles-js { position: fixed; width: 100%; height: 100%; z-index: -1; opacity: 0.2; }

        /* Login & UI Base */
        #loginScreen, #lockScreen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0f1219; z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; }
        #lockScreen { background: black; z-index: 10000; display: none; }
        .login-box { background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 50px; border-radius: 25px; border: 1px solid rgba(255,189,0,0.3); width: 320px; text-align: center; }
        .login-input { width: 100%; padding: 14px; margin-bottom: 20px; background: rgba(0,0,0,0.3); border: 1px solid #444; color: white; border-radius: 12px; text-align: center; outline: none; font-size: 1.1em; box-sizing: border-box; }
        .login-btn { width: 100%; padding: 14px; background: var(--eldorado-gold); color: black; font-weight: bold; border: none; border-radius: 12px; cursor: pointer; transition: 0.3s; font-size: 1.1em; }
        
        #appContainer { display: none; height: 100vh; }
        .sidebar { width: 80px; background: rgba(20, 25, 35, 0.7); backdrop-filter: blur(15px); border-left: var(--glass-border); display: flex; flex-direction: column; align-items: center; padding-top: 30px; gap: 25px; z-index: 100; }
        .nav-btn { color: #888; font-size: 1.6em; cursor: pointer; padding: 12px; border-radius: 15px; transition: 0.3s; }
        .nav-btn:hover { color: var(--eldorado-gold); background: rgba(255,255,255,0.05); transform: scale(1.15); }
        .main-area { flex: 1; padding: 30px; overflow-y: auto; }

        /* Stats & Header */
        .stat-card, .goal-container, .toolbar { background: var(--glass-card); backdrop-filter: blur(12px); border: var(--glass-border); border-radius: 20px; box-shadow: var(--card-shadow); }
        .goal-container { margin-bottom: 25px; padding: 15px 25px; position: relative; overflow: hidden; }
        .goal-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; position: relative; z-index: 2; color: #ddd; }
        .goal-progress-bg { background: rgba(0,0,0,0.4); height: 12px; border-radius: 10px; overflow: hidden; position: relative; z-index: 2; }
        .goal-progress-fill { height: 100%; background: linear-gradient(90deg, var(--eldorado-gold), #f39c12); width: 0%; transition: width 0.8s; }
        .stats-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { padding: 20px; text-align: center; }
        .stat-num { font-size: 2.5em; font-family: 'Rajdhani'; font-weight: bold; color: white; }
        .stat-title { font-size: 1em; color: #aaa; font-weight: 600; }

        /* Toolbar */
        .toolbar { padding: 15px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .btn-main { background: var(--eldorado-gold); color: #111; font-weight: 800; border: none; padding: 12px 30px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .btn-main:hover { transform: scale(1.05); }
        .toggle-btn { background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.1); padding: 10px 20px; border-radius: 12px; cursor: pointer; margin-left: 10px; }
        .btn-active { background: var(--roblox-red) !important; border-color: var(--roblox-red) !important; }
        .search-input { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); padding: 12px 25px; border-radius: 30px; color: white; width: 350px; outline: none; text-align: center; transition: 0.3s; }
        .search-input:focus { border-color: var(--eldorado-gold); width: 380px; background: rgba(0,0,0,0.5); }

        /* Inventory Cards */
        .game-section { margin-bottom: 35px; border: var(--glass-border); border-radius: 20px; overflow: hidden; background: rgba(255,255,255,0.01); }
        .game-header { background: linear-gradient(90deg, rgba(255, 189, 0, 0.05), transparent); padding: 18px 25px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .game-title { font-size: 1.5em; font-weight: 900; color: var(--eldorado-gold); }
        .sub-band { margin: 20px; background: rgba(255, 255, 255, 0.02); border-radius: 15px; border: 1px dashed rgba(255,255,255,0.1); }
        .sub-band-header { padding: 12px 20px; font-weight: bold; color: #ccc; border-bottom: 1px dashed rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .item-group { background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; margin: 15px; overflow: hidden; }
        .item-group-header { background: rgba(255,255,255,0.03); padding: 10px 20px; font-size: 1em; color: white; font-weight: bold; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05); cursor: pointer; }
        .group-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; padding: 15px; }
        .collapsed .game-content, .collapsed .group-grid, .collapsed .item-group-container { display: none !important; }
        
        .item-card { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 18px; position: relative; transition: 0.3s; }
        .item-card:hover { transform: translateY(-5px); border-color: rgba(255, 189, 0, 0.5); background: rgba(255, 255, 255, 0.06); }
        .card-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 8px; }
        .price-val { color: var(--success); font-weight: 800; font-family: 'Rajdhani'; font-size: 1.4em; }
        .edit-price-btn { background: none; border: none; color: #777; cursor: pointer; font-size: 0.8em; }
        .item-creds { background: rgba(0,0,0,0.4); padding: 10px; border-radius: 8px; font-family: monospace; color: #bbb; font-size: 0.9em; cursor: pointer; margin-bottom: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; border: 1px solid rgba(255,255,255,0.05); }
        .stock-control { display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 5px; border-radius: 10px; }
        .stock-btn { width: 30px; height: 30px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; color: white; font-size: 1.1em; display: flex; align-items: center; justify-content: center; }
        .btn-minus { background: #e74c3c; } .btn-plus { background: #2ecc71; }
        .stock-val { font-size: 1.3em; font-weight: bold; font-family: 'Rajdhani'; width: 40px; text-align: center; }
        
        .btn-del { color: #e74c3c; background: rgba(231, 76, 60, 0.1); border: 1px solid rgba(231, 76, 60, 0.2); width: 30px; height: 30px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .btn-restore { color: var(--success); background: rgba(46, 204, 113, 0.1); border: 1px solid rgba(46, 204, 113, 0.2); width: 30px; height: 30px; border-radius: 8px; cursor: pointer; margin-left: 5px; display: flex; align-items: center; justify-content: center; }
        .btn-bulk { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; cursor: pointer; padding: 6px 12px; margin-right: 5px; color: #aaa; }
        .btn-bulk-copy:hover { border-color: var(--eldorado-gold); color: var(--eldorado-gold); }
        .btn-bulk-del:hover { background: #e74c3c; color: white; }
        .btn-bulk-restore:hover { background: var(--success); color: black; }
        .btn-quick-add { border: 1px solid var(--eldorado-gold); color: var(--eldorado-gold); background: transparent; padding: 6px 12px; border-radius: 8px; cursor: pointer; transition: 0.2s; margin-left: 5px;} 
        .btn-quick-add:hover { background: var(--eldorado-gold); color: black; }

        .trash-section { border: 1px solid rgba(255, 71, 87, 0.3) !important; background: rgba(255, 71, 87, 0.02) !important; }
        .trash-title { color: var(--roblox-red) !important; }

        /* Modals & Admin */
        .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(20, 25, 35, 0.98); backdrop-filter: blur(20px); padding: 30px; border-radius: 20px; border: 1px solid rgba(255, 189, 0, 0.2); z-index: 2000; width: 500px; display: none; box-shadow: 0 20px 60px rgba(0,0,0,0.8); }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1999; display: none; backdrop-filter: blur(5px); }
        .modal-input, .modal-select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 10px; text-align: center; box-sizing: border-box; font-family: 'Cairo'; font-size: 1em; }
        .input-row { display: flex; gap: 10px; margin: 5px 0; width: 100%; } .input-row > * { flex: 1; }
        .toggle-container { display: flex; align-items: center; justify-content: space-between; margin: 15px 0; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; }
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; } .switch input { opacity: 0; width: 0; height: 0; } .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px; } .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; } input:checked + .slider { background-color: var(--eldorado-gold); } input:checked + .slider:before { transform: translateX(20px); }
        #toast { visibility: hidden; min-width: 250px; background-color: rgba(20, 20, 20, 0.9); backdrop-filter: blur(10px); color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 10000; left: 50%; bottom: 40px; transform: translateX(-50%); border: 1px solid var(--eldorado-gold); opacity: 0; transition: 0.3s; font-weight: bold; }
        #toast.show { visibility: visible; opacity: 1; bottom: 60px; }
        .admin-panel { position: fixed; bottom: 80px; left: 80px; width: 600px; background: rgba(15, 15, 20, 0.95); backdrop-filter: blur(15px); border: 1px solid var(--eldorado-gold); border-radius: 20px; z-index: 5000; padding: 25px; display: none; }
        .spy-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.95em; }
        .spy-table td { padding: 12px 10px; border-bottom: 1px solid rgba(255,255,255,0.05); vertical-align: middle; }
        .btn-fire, .btn-kick-admin, .btn-restore-user, .btn-reset-pass, .btn-test-discord { border-radius: 8px; padding: 6px 12px; margin-right: 5px; font-weight: bold; font-size: 0.85em; background:transparent; cursor:pointer;}
        .btn-fire { border: 1px solid var(--roblox-red); color: var(--roblox-red); } .btn-fire:hover { background: var(--roblox-red); color: white; }
        .btn-kick-admin { border: 1px solid var(--cyan); color: var(--cyan); } .btn-kick-admin:hover { background: var(--cyan); color: black; }
        .btn-reset-pass { border: 1px solid var(--eldorado-gold); color: var(--eldorado-gold); } .btn-reset-pass:hover { background: var(--eldorado-gold); color: black; }
        .btn-test-discord { border: 1px solid #7289da; color: #7289da; } .btn-test-discord:hover { background: #7289da; color: white; }
        .role-select { background: rgba(0,0,0,0.3); border: 1px solid #444; color: white; padding: 6px; border-radius: 8px; }
        .trail-dot { position: fixed; width: 8px; height: 8px; background: var(--eldorado-gold); border-radius: 50%; pointer-events: none; z-index: 9999; animation: fadeTrail 0.8s forwards; box-shadow: 0 0 10px var(--eldorado-gold); }
        .bs-table { width: 100%; border-collapse: collapse; margin-top: 15px; } .bs-table th { text-align: right; color: #888; border-bottom: 1px solid #444; padding: 10px; } .bs-table td { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .rank-badge-num { display: inline-block; width: 25px; height: 25px; text-align: center; border-radius: 50%; line-height: 25px; font-weight: bold; color:black; background:#ddd; }
        .rank-1 { background: #f1c40f; box-shadow: 0 0 10px #f1c40f; } .rank-2 { background: #bdc3c7; } .rank-3 { background: #cd7f32; } 
        .crm-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .tag-vip { background: var(--eldorado-gold); color: black; padding: 2px 8px; border-radius: 4px; font-weight: bold; margin-left: 5px;}
        .tag-normal { background: #444; padding: 2px 8px; border-radius: 4px; margin-left: 5px;}
        .tag-trash { background: var(--roblox-red); text-decoration: line-through; padding: 2px 8px; border-radius: 4px; margin-left: 5px;}
        .status-dot { height: 8px; width: 8px; background-color: #555; border-radius: 50%; display: inline-block; margin-left: 5px; }
        .online { background-color: var(--success); box-shadow: 0 0 5px var(--success); }
    </style>
</head>
<body>

    <div id="particles-js"></div>
    <div id="toast">ØªÙ…!</div>

    <div id="lockScreen">
        <i class="fas fa-ban" style="font-size: 5em; color: var(--roblox-red); margin-bottom: 20px;"></i>
        <h1 style="color: white;">ACCESS DENIED</h1>
        <p style="color: #aaa;" id="lockMessage">ØªÙ… Ø­Ø¸Ø±Ùƒ</p>
        <button onclick="location.reload()" style="margin-top:20px; padding:10px 20px; cursor:pointer; background:#333; border:none; color:white; border-radius:8px">Ø±Ø¬ÙˆØ¹</button>
    </div>

    <div id="loginScreen">
        <div class="login-box">
            <h2 style="color:var(--eldorado-gold); margin-bottom:30px; font-size:1.8em">ELDORADO SYSTEM</h2>
            <input type="text" id="username" class="login-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            <input type="password" id="password" class="login-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button class="login-btn" onclick="checkLogin()">Ø¯Ø®ÙˆÙ„ ğŸ”“</button>
            <div id="loginError" style="color:var(--roblox-red); margin-top:15px; display:none; font-weight:bold">â›” Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©</div>
        </div>
    </div>

    <div id="adminPanel" class="admin-panel">
        <h3 style="color:var(--eldorado-gold); margin:0 0 15px 0; border-bottom:1px solid #333; padding-bottom:10px;">
            <i class="fas fa-crown"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù…Ù„ÙƒØ©
        </h3>
        <table class="spy-table">
            <thead><tr><th>Ø§Ù„Ù…ÙˆØ§Ø·Ù†</th><th>Ø§Ù„Ø±ØªØ¨Ø©</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead>
            <tbody id="userListBody"></tbody>
        </table>
        <div style="margin-top:20px; text-align:center; display:flex; gap:10px; justify-content:center">
            <button class="btn-test-discord" onclick="testDiscord()">ğŸ”Š Test Discord</button>
            <button class="btn-fire" style="border-color:red; color:red" onclick="console.log('BOOM')">ğŸ’£ DANGER</button>
        </div>
    </div>

    <div id="appContainer">
        <div class="sidebar">
            <div style="font-size:2em; color:var(--eldorado-gold); margin-bottom:20px;" id="myRankIcon"><i class="fas fa-crown"></i></div>
            <div class="nav-btn" onclick="saveData()" title="Ø­ÙØ¸"><i class="fas fa-save"></i></div>
            <div class="nav-btn" onclick="openBestSellersModal()" title="Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹"><i class="fas fa-trophy" style="color:#f1c40f"></i></div>
            <div class="nav-btn" onclick="openCRMModal()" title="Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"><i class="fas fa-users"></i></div>
            <div class="nav-btn" onclick="openCalcModal()" title="Ø­Ø§Ø³Ø¨Ø©"><i class="fas fa-calculator"></i></div>
            <div class="nav-btn admin-only" onclick="toggleAdminPanel()" title="Admin"><i class="fas fa-skull" style="color:var(--roblox-red)"></i></div>
            <div class="nav-btn" onclick="logout()" title="Ø®Ø±ÙˆØ¬"><i class="fas fa-sign-out-alt"></i></div>
        </div>

        <div class="main-area">
            <div class="goal-container">
                <div class="goal-header">
                    <span>ğŸ¯ Ù‡Ø¯Ù Ø§Ù„ÙŠÙˆÙ…: <span class="goal-text" onclick="setDailyGoal()">$<span id="dailyGoalText">50</span></span></span>
                    <span>ØµØ§ÙÙŠ Ø§Ù„ÙŠÙˆÙ…: <span style="color:var(--success)">$<span id="todayProfitText">0</span></span></span>
                </div>
                <div class="goal-progress-bg"><div class="goal-progress-fill" id="goalBar"></div></div>
            </div>

            <div class="stats-row">
                <div class="stat-card"><span class="stat-num">$<span id="total-profit">0</span></span><span class="stat-title">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙƒÙ„ÙŠ</span></div>
                <div class="stat-card"><span class="stat-num"><span id="total-stock">0</span></span><span class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø§Øª</span></div>
            </div>
            
            <div class="toolbar">
                <div style="display:flex; gap:10px;">
                    <button class="btn-main perm-add" onclick="openAddModal()"><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ©</button>
                    <button class="toggle-btn" id="btnHideZero" onclick="toggleHideZero()"><i class="fas fa-eye-slash"></i> Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙØ§Ø±Øº</button>
                </div>
                <input type="text" class="search-input" id="searchInput" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ø£ÙƒÙˆÙ†Øª..." onkeyup="render()">
            </div>
            <div id="content-area"></div>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeModals()"></div>
    
    <div id="addModal" class="modal">
        <h3 style="color:var(--eldorado-gold); text-align:center; margin-bottom:20px">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø²ÙˆÙ†</h3>
        <select id="gameSelect" class="modal-select"><option>Steal a Brainrot</option><option>Blox Fruits</option><option>Pet Sim 99</option><option>MM2</option><option>Roblox Accounts</option></select>
        <input id="subCategory" class="modal-input" placeholder="Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ (Ù…Ø«Ø§Ù„: Units)">
        <div class="toggle-container"><span>ğŸ“š Ø¥Ø¶Ø§ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ© (Bulk)</span><label class="switch"><input type="checkbox" id="bulkToggle" onchange="toggleBulkMode()"><span class="slider"></span></label></div>
        <input type="text" id="itemName" class="modal-input" placeholder="Ø§Ø³Ù… Ø§Ù„ØºØ±Ø¶ (Ù…Ø«Ø§Ù„: Kitsune)">
        <div id="singleInputs"><input type="text" id="itemCreds" class="modal-input" placeholder="User:Pass"><div class="input-row"><input type="number" id="itemPrice" class="modal-input" placeholder="Ø¨ÙŠØ¹ ($)"><input type="number" id="itemCost" class="modal-input" placeholder="ØªÙƒÙ„ÙØ© ($)"><input type="number" id="itemStock" class="modal-input" value="1" placeholder="Ø¹Ø¯Ø¯"></div></div>
        <div id="bulkInputs" style="display:none;"><textarea id="bulkData" class="modal-input" style="height:100px;" placeholder="Ø¶Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ù†Ø§..."></textarea><div class="input-row"><input type="number" id="bulkPrice" class="modal-input" placeholder="Ø¨ÙŠØ¹ ($)"><input type="number" id="bulkCost" class="modal-input" placeholder="ØªÙƒÙ„ÙØ© ($)"><input type="number" id="bulkStock" class="modal-input" value="1" placeholder="Ø¹Ø¯Ø¯/Ø­Ø³Ø§Ø¨"></div></div>
        <button class="btn-main" style="width:100%; margin-top:15px; justify-content:center;" onclick="addItem()">Ø­ÙØ¸</button>
    </div>

    <div id="calcModal" class="modal">
        <h3 style="color:var(--success); text-align:center">ğŸ§® Ø­Ø§Ø³Ø¨Ø© (15%)</h3>
        <div class="input-row" style="align-items:center;"><div><label style="font-size:0.8em; color:#888">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</label><input type="number" id="calcPrice" class="modal-input" placeholder="0.00" oninput="calcFwd()"></div><div style="font-size:1.5em; color:var(--eldorado-gold); padding-top:15px">â†”ï¸</div><div><label style="font-size:0.8em; color:#888">ØµØ§ÙÙŠ Ø±Ø¨Ø­Ùƒ</label><input type="number" id="calcNet" class="modal-input" style="border-color:var(--eldorado-gold)" placeholder="0.00" oninput="calcReverse()"></div></div><div class="calc-display" style="text-align:center; margin-top:10px; color:#aaa;">Ø®ØµÙ… Ø§Ù„Ù…ÙˆÙ‚Ø¹: <span id="calc-fee" style="color:var(--roblox-red); font-weight:bold">0.00$</span></div>
    </div>

    <div id="crmModal" class="modal">
        <h3 style="color:var(--eldorado-gold); text-align:center">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
        <input type="text" id="crmSearch" class="modal-input" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„..." onkeyup="renderCRM()">
        <div class="input-row" style="margin-top:15px; align-items:center;"><input type="text" id="crmNameInput" class="modal-input" style="flex:2" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"><select id="crmStatusSelect" class="modal-select" style="flex:1"><option value="Normal">Normal</option><option value="VIP">VIP ğŸ‘‘</option><option value="Trash">Trash ğŸ—‘ï¸</option></select><button class="btn-main" onclick="addCustomer()" style="padding:10px 15px; height:45px; margin-top:8px;">+</button></div>
        <div id="crmList" class="crm-list" style="margin-top:10px; border-top:1px solid #444; max-height:300px; overflow-y:auto;"></div>
    </div>

    <div id="bestSellersModal" class="modal"><h3 style="color:var(--eldorado-gold); text-align:center"><i class="fas fa-trophy"></i> Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹</h3><div class="crm-list" style="max-height:400px; overflow-y:auto;"><table class="bs-table"><thead><tr><th>#</th><th>Ø§Ø³Ù… Ø§Ù„ØºØ±Ø¶</th><th>Ù…Ø¨ÙŠØ¹Ø§Øª</th><th>ØµØ§ÙÙŠ</th><th>Ø­Ø°Ù</th></tr></thead><tbody id="bestSellersBody"></tbody></table></div></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAhO__s4pdjDCJjAbqFE-U-DCqHHW8aU7E",
            authDomain: "eldorado-system.firebaseapp.com",
            projectId: "eldorado-system",
            storageBucket: "eldorado-system.firebasestorage.app",
            messagingSenderId: "857572520027",
            appId: "1:857572520027:web:c09a1a77af664f3921cf7e",
            measurementId: "G-6DRXV85M9V"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const ROLES_CONFIG = { 'King': { color:'#ffbd00', icon:'ğŸ‘‘', perm:4 }, 'Master': { color:'#8e44ad', icon:'âšœï¸', perm:3 }, 'Pro': { color:'#00cec9', icon:'â­', perm:2 }, 'Rookie': { color:'#95a5a6', icon:'ğŸ›¡ï¸', perm:1 } };
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1461729733124423702/FydZIFQDx7J0Azn0mhLlAa0WSpYJ9A5YrbOlNpuwwQAZeP0bCB3hGb_cD7DyTSQtvXne";
        
        let inventory = [], dailyStats = {profit:0, goal:50}, salesHistory = {}, customers = [], usersData = {};
        let currentUser = localStorage.getItem('active_user_v2'); 
        let currentRank = null;
        let hideZeroStock = false;
        let collapsedState = new Set();

        db.ref('inventory').on('value', s => { inventory = s.val() || []; render(); });
        db.ref('dailyStats').on('value', s => { dailyStats = s.val() || {profit:0, goal:50}; updateDailyProgress(); });
        db.ref('salesHistory').on('value', s => { salesHistory = s.val() || {}; });
        db.ref('customers').on('value', s => { customers = s.val() || []; });
        db.ref('users').on('value', s => { 
            usersData = s.val() || {}; 
            if(currentUser && usersData[currentUser]) {
                const me = usersData[currentUser];
                if(me.banned) { logout(); alert("ØªÙ… Ø­Ø¸Ø±Ùƒ!"); }
                if(me.kicked) { logout(); alert("ØªÙ… Ø·Ø±Ø¯Ùƒ!"); db.ref('users/'+currentUser).update({kicked:false}); }
                if(me.rank !== currentRank) { currentRank = me.rank; setupPermissions(); showToast("ØªØºÙŠØ±Øª Ø±ØªØ¨ØªÙƒ!"); }
            }
            if(document.getElementById('adminPanel').style.display === 'block') renderUserList();
        });

        if(currentUser) { checkLogin(); }

        function checkLogin() {
            const u = document.getElementById('username').value.trim().toLowerCase();
            const p = document.getElementById('password').value.trim();
            db.ref('users/'+u).once('value', s => {
                const user = s.val();
                if(user && user.p === p) {
                    if(user.banned) { alert("Ù…Ø­Ø¸ÙˆØ±!"); return; }
                    loginSuccess(u, user.rank);
                } else { document.getElementById('loginError').style.display='block'; }
            });
        }

        function loginSuccess(u, r) {
            currentUser = u; currentRank = r;
            localStorage.setItem('active_user_v2', u);
            db.ref('users/'+u).update({ online: true });
            db.ref('users/'+u).onDisconnect().update({ online: false });
            document.getElementById('loginScreen').style.display='none';
            document.getElementById('appContainer').style.display='flex';
            setupPermissions();
            if(r === 'King') { document.addEventListener('mousemove', createTrail); document.body.classList.add('is-king'); }
            render();
        }

        function logout() { 
            if(currentUser) db.ref('users/'+currentUser).update({ online: false });
            localStorage.removeItem('active_user_v2'); location.reload(); 
        }

        function sendDiscordLog(t, d, c) {
            if(!currentUser) return;
            const p = { username: "Eldorado Bot", embeds: [{ title: t, description: d, color: c, footer: { text: `${currentUser} â€¢ ${currentRank}` }, timestamp: new Date() }] };
            fetch(DISCORD_WEBHOOK, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(p) });
        }
        function testDiscord() { sendDiscordLog("ğŸ”Š Test", "Testing connection...", 5763719); showToast("Sent!"); }

        function addItem() {
            const g=document.getElementById('gameSelect').value, c=document.getElementById('subCategory').value||"General", n=document.getElementById('itemName').value; if(!n) return;
            let newItems = [];
            const isB = document.getElementById('bulkToggle').checked;
            if(isB) {
                const txt = document.getElementById('bulkData').value, p=document.getElementById('bulkPrice').value, cost=document.getElementById('bulkCost').value, st=document.getElementById('bulkStock').value;
                txt.split('\n').forEach(l=>{ if(l.trim()) newItems.push({ id:Date.now()+'_'+Math.random().toString(36).substr(2,9), game:g, category:c, name:n, creds:l.trim(), price:parseFloat(p)||0, cost:parseFloat(cost)||0, stock:parseInt(st)||1 }); });
            } else {
                const cr = document.getElementById('itemCreds').value, p=document.getElementById('itemPrice').value, cost=document.getElementById('itemCost').value, st=document.getElementById('itemStock').value;
                newItems.push({ id:Date.now()+'_'+Math.random().toString(36).substr(2,9), game:g, category:c, name:n, creds:cr, price:parseFloat(p)||0, cost:parseFloat(cost)||0, stock:parseInt(st)||1 });
            }
            db.ref('inventory').set([...inventory, ...newItems]);
            closeModals(); sendDiscordLog("â• Ø¥Ø¶Ø§ÙØ©", `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${newItems.length} Ø£ÙƒÙˆÙ†Øª (${n})`, 3066993);
        }

        // QUICK ADD
        function openQuickAdd(g, c, n) {
            document.getElementById('gameSelect').value = g;
            document.getElementById('subCategory').value = c;
            document.getElementById('itemName').value = n;
            openAddModal();
        }

        function updateStock(id, c) {
            // FIX: Allow decrement if rank is Pro (2) or higher
            if(c<0 && !can('sell')) { alert("Ø±ØªØ¨Ø© Ù‚Ù„ÙŠÙ„Ø©!"); return; }
            
            // FIX: Convert ID to string for robust finding
            const idx = inventory.findIndex(x=>String(x.id) == String(id));
            if(idx > -1) {
                if(c<0 && inventory[idx].stock>0) {
                    let profit = (inventory[idx].price*0.85)-inventory[idx].cost;
                    db.ref('dailyStats/profit').set(dailyStats.profit + profit);
                    sendDiscordLog("ğŸ’° Ø¨ÙŠØ¹", `ØªÙ… Ø¨ÙŠØ¹ ${inventory[idx].name}`, 15105570);
                    let h = salesHistory[inventory[idx].name] || {count:0, profit:0};
                    h.count++; h.profit+=profit;
                    db.ref('salesHistory/'+inventory[idx].name).set(h);
                }
                inventory[idx].stock = Math.max(0, parseInt(inventory[idx].stock)+c);
                db.ref('inventory').set(inventory);
            }
        }

        function render() {
            const container = document.getElementById('content-area'); const scrollPos = window.scrollY; container.innerHTML = '';
            const search = document.getElementById('searchInput').value.toLowerCase();
            let totalStock=0, totalProfit=0; const tree = {};
            
            inventory.forEach(item => {
                if (hideZeroStock && item.stock === 0) return;
                if (item.game === 'ğŸ—‘ï¸ Empty Accounts' && !can('delete_perm')) return;
                if(item.name.toLowerCase().includes(search) || item.game.toLowerCase().includes(search)) {
                    totalStock += parseInt(item.stock); totalProfit += ((item.price*0.85)-item.cost)*item.stock;
                    if(!tree[item.game]) tree[item.game] = {}; if(!tree[item.game][item.category]) tree[item.game][item.category] = {}; if(!tree[item.game][item.category][item.name]) tree[item.game][item.category][item.name] = [];
                    tree[item.game][item.category][item.name].push(item);
                }
            });
            document.getElementById('total-stock').innerText=totalStock; document.getElementById('total-profit').innerText=totalProfit.toFixed(2);

            for (const [gName, cats] of Object.entries(tree)) {
                const gId = 'sec-' + gName.replace(/\s+/g, '-'); const isCol = collapsedState.has(gId) ? 'collapsed' : '';
                const isTrash = gName === 'ğŸ—‘ï¸ Empty Accounts';
                if (isTrash && !can('delete_perm')) continue;
                const secCls = isTrash ? 'game-section trash-section' : 'game-section';
                let html = `<div class="${secCls} ${isCol}" id="${gId}"><div class="game-header" onclick="toggleSection('${gId}')"><div class="game-title">${gName}</div><i class="fas fa-chevron-down"></i></div><div class="game-content">`;
                for (const [cName, groups] of Object.entries(cats)) {
                    const cId = 'cat-' + gName + '-' + cName; const isCCol = collapsedState.has(cId) ? 'collapsed' : '';
                    html += `<div class="sub-band ${isCCol}" id="${cId}"><div class="sub-band-header" onclick="toggleSection('${cId}')"><span>ğŸ“‚ ${cName}</span><i class="fas fa-chevron-down"></i></div><div class="item-group-container">`;
                    for (const [iName, items] of Object.entries(groups)) {
                        const grpId = 'grp-' + gName + '-' + iName; const isGCol = collapsedState.has(grpId) ? 'collapsed' : '';
                        let bulk = ''; if(can('sell')) { 
                            let delIcon = isTrash ? 'fa-times' : 'fa-trash'; let showDel = isTrash ? can('delete_perm') : can('sell');
                            let restoreGrp = isTrash && can('delete_perm') ? `<button class="btn-bulk btn-bulk-restore" onclick="restoreGroup(event,'${gName}','${cName}','${iName}')" title="Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ÙƒÙ„"><i class="fas fa-recycle"></i></button>` : '';
                            // Quick Add Button
                            let quickAddBtn = !isTrash && can('add') ? `<button class="btn-bulk btn-quick-add" onclick="event.stopPropagation(); openQuickAdd('${gName}', '${cName}', '${iName}')" title="Ø¥Ø¶Ø§ÙØ© Ø³Ø±ÙŠØ¹Ø©"><i class="fas fa-plus"></i></button>` : '';
                            
                            bulk = `${quickAddBtn} <button class="btn-bulk btn-bulk-copy" onclick="event.stopPropagation(); copyGroupCreds('${gName}','${cName}','${iName}')"><i class="fas fa-copy"></i></button>${restoreGrp}${showDel ? `<button class="btn-bulk btn-bulk-del" onclick="deleteGroup(event,'${gName}','${cName}','${iName}')"><i class="fas ${delIcon}"></i></button>`:''}`;
                        }
                        html += `<div class="item-group ${isGCol}" id="${grpId}"><div class="item-group-header" onclick="toggleSection('${grpId}')"><span>${iName}</span><div style="display:flex; align-items:center; gap:5px">${bulk}<span class="group-badge" style="margin-left:5px">${items.length}</span><i class="fas fa-chevron-down"></i></div></div><div class="group-grid">`;
                        items.forEach(i => {
                            let btns = ''; if(isTrash) { if(can('delete_perm')) btns = `<button class="btn-restore" onclick="restoreItem('${i.id}')"><i class="fas fa-recycle"></i></button><button class="btn-del" onclick="permanentDelete('${i.id}')"><i class="fas fa-times"></i></button>`; } else { if(can('sell')) btns = `<button class="btn-del" onclick="softDelete('${i.id}')"><i class="fas fa-trash"></i></button>`; }
                            // Fix button update stock logic to treat ID as string
                            let stockHtml = ''; if(can('add')) stockHtml = `<div class="stock-control"><button class="stock-btn btn-minus" onclick="updateStock('${i.id}',-1)">-</button><span class="stock-val" style="color:${i.stock===0?'#e74c3c':i.stock<3?'#f1c40f':'white'}">${i.stock}</span><button class="stock-btn btn-plus" onclick="updateStock('${i.id}',1)">+</button></div>`; else stockHtml = `<div class="stock-control"><span class="stock-val">${i.stock}</span></div>`;
                            html += `<div class="item-card" id="card-${i.id}"><div class="card-top"><div class="price-area"><span class="price-val">$${i.price}</span><button class="edit-price-btn" onclick="editPrice('${i.id}')">âœï¸</button></div><div>${btns}</div></div><div class="item-creds" onclick="copy('${i.creds}')">${i.creds.substring(0,15)}...</div>${stockHtml}</div>`;
                        });
                        html += `</div></div>`;
                    }
                    html += `</div></div>`;
                }
                html += `</div></div>`; container.innerHTML += html;
            }
            window.scrollTo(0, scrollPos);
        }

        // --- UTILS & HELPERS ---
        function renderUserList() { const tb = document.getElementById('userListBody'); tb.innerHTML = ''; for (const [u, data] of Object.entries(usersData)) { if (u === 'adham zng') continue; const isOnline = data.online ? 'online' : ''; const roleOptions = Object.keys(ROLES_CONFIG).map(r => `<option value="${r}" ${data.rank === r ? 'selected' : ''}>${ROLES_CONFIG[r].icon} ${r}</option>`).join(''); const banBtnText = data.banned ? 'Unban' : 'BAN ğŸ”¥'; tb.innerHTML += `<tr><td>${u} <span class="status-dot ${isOnline}"></span></td><td><select onchange="changeRank('${u}', this.value)" class="role-select">${roleOptions}</select></td><td>${data.online?'On':'Off'}</td><td><button class="btn-fire" onclick="toggleBan('${u}')">${banBtnText}</button> <button class="btn-kick-admin" onclick="kickUser('${u}')">KICK</button></td></tr>`; } }
        function changeRank(u, r) { db.ref('users/'+u).update({rank:r}); sendDiscordLog("ğŸ‘‘ ØªØ±Ù‚ÙŠØ©", `${u} -> ${r}`, 16776960); }
        function toggleBan(u) { let b = !usersData[u].banned; db.ref('users/'+u).update({banned:b}); sendDiscordLog(b?"ğŸ”´ Ø­Ø¸Ø±":"ğŸŸ¢ ÙÙƒ Ø­Ø¸Ø±", `${u}`, b?0:3066993); }
        function kickUser(u) { db.ref('users/'+u).update({kicked:true}); sendDiscordLog("ğŸ¥¾ Ø·Ø±Ø¯", `${u}`, 15158332); }
        function softDelete(id) { const idx = inventory.findIndex(x=>String(x.id)==String(id)); if(idx > -1) { inventory[idx].originalGame = inventory[idx].game; inventory[idx].originalCategory = inventory[idx].category; inventory[idx].game = 'ğŸ—‘ï¸ Empty Accounts'; inventory[idx].category = 'Recycle Bin'; db.ref('inventory').set(inventory); } }
        function restoreItem(id) { const idx = inventory.findIndex(x=>String(x.id)==String(id)); if(idx > -1) { inventory[idx].game = inventory[idx].originalGame; inventory[idx].category = inventory[idx].originalCategory; db.ref('inventory').set(inventory); } }
        function permanentDelete(id) { if(confirm("Ù†Ù‡Ø§Ø¦ÙŠØŸ")) { const n = inventory.filter(x=>String(x.id)!=String(id)); db.ref('inventory').set(n); } }
        function restoreGroup(e, g, c, n) { e.stopPropagation(); if(!can('delete_perm')) return; if(!confirm("Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©ØŸ")) return; inventory.forEach(i=>{ if(i.game===g && i.category===c && i.name===n) { i.game=i.originalGame; i.category=i.originalCategory; } }); db.ref('inventory').set(inventory); }
        function deleteGroup(e, g, c, n) { e.stopPropagation(); const isT = g==='ğŸ—‘ï¸ Empty Accounts'; if(isT && !can('delete_perm')) return; if(!isT && !can('sell')) return; if(!confirm("Ù…ØªØ£ÙƒØ¯ØŸ")) return; if (isT) { const newInv = inventory.filter(i=>!(i.game===g && i.category===c && i.name===n)); db.ref('inventory').set(newInv); } else { inventory.forEach(i=>{ if(i.game===g && i.category===c && i.name===n) { i.originalGame=i.game; i.originalCategory=i.category; i.game='ğŸ—‘ï¸ Empty Accounts'; i.category='Recycle Bin'; } }); db.ref('inventory').set(inventory); } }
        function copyGroupCreds(g, c, n) { const txt = inventory.filter(i=>i.game===g&&i.category===c&&i.name===n).map(i=>i.creds).join('\n'); navigator.clipboard.writeText(txt); showToast("ØªÙ… Ø§Ù„Ù†Ø³Ø® ğŸ“‹"); }
        function setupPermissions() { const role = ROLES_CONFIG[currentRank]; document.getElementById('myRankIcon').innerHTML = `${role.icon} <span style="font-size:0.5em">${currentRank}</span>`; document.getElementById('myRankIcon').style.color = role.color; if(role.perm < 3) document.querySelector('.admin-only').style.display = 'none'; else document.querySelector('.admin-only').style.display = 'flex'; }
        function can(action) { const lvl = ROLES_CONFIG[currentRank].perm; if (action === 'ban') return lvl >= 4; if (action === 'kick') return lvl >= 3; if (action === 'delete_perm') return lvl >= 3; if (action === 'sell') return lvl >= 2; if (action === 'add') return lvl >= 1; return false; }
        function updateDailyProgress() { const p = Math.min((dailyStats.profit / dailyStats.goal) * 100, 100); document.getElementById('goalBar').style.width = p + "%"; document.getElementById('dailyGoalText').innerText = dailyStats.goal; document.getElementById('todayProfitText').innerText = dailyStats.profit.toFixed(2); }
        function setDailyGoal() { let n = prompt("Ø§Ù„Ù‡Ø¯Ù:", dailyStats.goal); if(n) db.ref('dailyStats/goal').set(parseFloat(n)); }
        function openAddModal() { document.getElementById('addModal').style.display='block'; document.getElementById('overlay').style.display='block'; }
        function openCalcModal() { document.getElementById('calcModal').style.display='block'; document.getElementById('overlay').style.display='block'; }
        function openBestSellersModal() { document.getElementById('bestSellersModal').style.display='block'; document.getElementById('overlay').style.display='block'; renderBestSellers(); }
        function openCRMModal() { document.getElementById('crmModal').style.display='block'; document.getElementById('overlay').style.display='block'; renderCRM(); }
        function closeModals() { document.querySelectorAll('.modal').forEach(m=>m.style.display='none'); document.getElementById('overlay').style.display='none'; }
        function calcFwd() { const p=parseFloat(document.getElementById('calcPrice').value)||0; document.getElementById('calcNet').value = (p*0.85).toFixed(2); document.getElementById('calc-fee').innerText = `-$${(p*0.15).toFixed(2)}`; }
        function calcReverse() { const n=parseFloat(document.getElementById('calcNet').value)||0; document.getElementById('calcPrice').value = (n/0.85).toFixed(2); }
        function toggleBulkMode() { const b = document.getElementById('bulkToggle').checked; document.getElementById('singleInputs').style.display = b?'none':'block'; document.getElementById('bulkInputs').style.display = b?'block':'none'; }
        function editPrice(id) { const i=inventory.find(x=>String(x.id)==String(id)); if(i) { let p=prompt("Ø³Ø¹Ø± Ø¬Ø¯ÙŠØ¯:", i.price); if(p) { i.price=parseFloat(p); db.ref('inventory').set(inventory); } } }
        function createTrail(e) { const dot = document.createElement('div'); dot.className = 'trail-dot'; dot.style.left = e.pageX + 'px'; dot.style.top = e.pageY + 'px'; document.body.appendChild(dot); setTimeout(() => dot.remove(), 800); }
        function playAudio(type) { console.log("Sound: " + type); }
        function renderCRM() { const s = document.getElementById('crmSearch').value.toLowerCase(); const l = document.getElementById('crmList'); l.innerHTML=''; customers.forEach((c,i)=>{ if(c.name.toLowerCase().includes(s)) { let cls = c.status==='VIP'?'tag-vip':c.status==='Trash'?'tag-trash':'tag-normal'; l.innerHTML+=`<div class="crm-item"><div><span class="crm-name">${c.name}</span><span class="tag ${cls}">${c.status}</span></div><button class="btn-crm-del" onclick="delCust(${i})">ğŸ—‘ï¸</button></div>`; }}); }
        function addCustomer() { const n=document.getElementById('crmNameInput').value, s=document.getElementById('crmStatusSelect').value; if(n) { customers.push({name:n, status:s}); db.ref('customers').set(customers); document.getElementById('crmNameInput').value=''; renderCRM(); } }
        function delCust(i) { if(confirm("Ù…Ø³Ø­?")) { customers.splice(i,1); db.ref('customers').set(customers); renderCRM(); } }
        function toggleAdminPanel() { const p = document.getElementById('adminPanel'); p.style.display = p.style.display === 'block' ? 'none' : 'block'; renderUserList(); }
        function renderBestSellers() { const b=document.getElementById('bestSellersBody'); b.innerHTML=''; Object.entries(salesHistory).sort((a,x)=>x[1].count-a[1].count).forEach((e,i)=>{ b.innerHTML+=`<tr><td>${i+1}</td><td>${e[0]}</td><td>${e[1].count}</td><td>$${e[1].profit.toFixed(2)}</td><td><button class="btn-del" onclick="db.ref('salesHistory/${e[0]}').remove()">X</button></td></tr>`; }); }
        function toggleSection(id) { const el=document.getElementById(id); if(el) { el.classList.toggle('collapsed'); if(el.classList.contains('collapsed')) collapsedState.add(id); else collapsedState.delete(id); } }
        function toggleHideZero() { hideZeroStock=!hideZeroStock; render(); }
        function copy(t) { navigator.clipboard.writeText(t); showToast("Copied"); }
        function showToast(m) { const t=document.getElementById("toast"); t.innerText=m; t.className="show"; setTimeout(()=>t.className="",3000); }

        function startStatusCheck() {
            setInterval(() => {
                userConfig = JSON.parse(localStorage.getItem('users_config_db')); 
                const myData = userConfig[currentUser];
                if (myData.banned) { document.getElementById('appContainer').style.display = 'none'; document.getElementById('lockScreen').style.display = 'flex'; document.getElementById('lockMessage').innerText = "ØªÙ… Ø­Ø¸Ø±Ùƒ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ â›”"; localStorage.removeItem('active_user'); currentUser = null; } 
                else if (myData.kicked) { document.getElementById('appContainer').style.display = 'none'; document.getElementById('lockScreen').style.display = 'flex'; document.getElementById('lockMessage').innerText = "ØªÙ… Ø·Ø±Ø¯Ùƒ (Kicked) ğŸ¥¾"; localStorage.removeItem('active_user'); currentUser = null; userConfig[currentUser].kicked = false; saveUserConfig(); }
                if (myData.rank !== currentRank) { currentRank = myData.rank; setupPermissions(); render(); showToast(`Ø±ØªØ¨ØªÙƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: ${currentRank}`); }
            }, 2000);
        }

    </script>
</body>
</html>
